<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LingoBridge | English to Hindi Translator</title>
    <style>
        :root {
            --primary-bg: #0a192f;
            --card-bg: #112240;
            --neon-blue: #64ffda;
            --neon-purple: #c084fc;
            --text-primary: #ccd6f6;
            --text-secondary: #8892b0;
            --border-color: rgba(100, 255, 218, 0.2);
            --success: #10b981;
            --error: #ef4444;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--primary-bg) 0%, #1a1a2e 100%);
            color: var(--text-primary);
            font-family: 'Segoe UI', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            width: min(95%, 1000px);
            background: var(--card-bg);
            padding: 2.5rem;
            border-radius: 24px;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
        }

        .header { text-align: center; margin-bottom: 2rem; }
        h1 { 
            color: var(--neon-blue); 
            font-size: clamp(2rem, 5vw, 3rem); 
            margin: 0 0 0.5rem 0;
        }
        .subtitle { color: var(--text-secondary); font-size: 1.1rem; margin: 0; }

        .tool-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        @media (min-width: 768px) {
            .tool-grid { grid-template-columns: 1fr 1fr; }
        }

        .textarea-group { display: flex; flex-direction: column; }
        .label { 
            font-weight: 600; 
            color: var(--neon-blue); 
            margin-bottom: 0.75rem; 
        }

        textarea {
            width: 100%;
            min-height: 180px;
            background: rgba(29,45,80,0.8);
            border: 2px solid var(--border-color);
            border-radius: 16px;
            color: var(--text-primary);
            padding: 1.25rem;
            font-size: 16px;
            resize: vertical;
            transition: all 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: var(--neon-blue);
            box-shadow: 0 0 0 4px rgba(100,255,218,0.1);
        }

        textarea::placeholder { color: var(--text-secondary); }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            padding: 1.5rem 0;
            border-top: 1px solid var(--border-color);
        }

        .btn {
            background: transparent;
            border: 2px solid var(--neon-blue);
            color: var(--neon-blue);
            padding: 0.875rem 1.75rem;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn:hover {
            background: var(--neon-blue);
            color: var(--primary-bg);
            transform: translateY(-2px);
        }

        .btn:disabled { 
            opacity: 0.5; 
            cursor: not-allowed; 
            transform: none !important;
        }

        .btn.success {
            border-color: var(--success);
            color: var(--success);
        }

        .btn.success:hover {
            background: var(--success);
            color: var(--primary-bg);
        }

        .status {
            text-align: center;
            padding: 1rem;
            border-radius: 12px;
            margin-top: 1rem;
            font-weight: 500;
            display: none;
        }

        .status.loading {
            background: rgba(100,255,218,0.1);
            color: var(--neon-blue);
            border: 1px solid var(--neon-blue);
        }

        .status.success { 
            background: rgba(16,185,129,0.1); 
            color: var(--success); 
            border: 1px solid var(--success);
        }

        .status.error { 
            background: rgba(239,68,68,0.1); 
            color: var(--error); 
            border: 1px solid var(--error);
        }

        .char-count {
            text-align: right;
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }

        #fileInput { display: none; }

        @media (max-width: 640px) {
            .controls { flex-direction: column; align-items: stretch; }
            .btn { justify-content: center; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üî§ LingoBridge</h1>
            <p class="subtitle">English ‡§ï‡•ã ‡§Ü‡§∏‡§æ‡§® ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡•á‡§Ç - ‡§§‡•Å‡§∞‡§Ç‡§§!</p>
        </div>

        <div class="tool-grid">
            <div class="textarea-group">
                <label for="englishText">üá∫üá∏ English Text</label>
                <textarea 
                    id="englishText" 
                    placeholder="‡§Ø‡§π‡§æ‡§Å English ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§≤‡§ø‡§ñ‡•á‡§Ç ‡§Ø‡§æ .txt ‡§´‡§æ‡§á‡§≤ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç..."
                    maxlength="3000"
                ></textarea>
                <div class="char-count" id="charCount">0/3000</div>
            </div>
            
            <div class="textarea-group">
                <label for="hindiText">üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶</label>
                <textarea id="hindiText" placeholder="‡§Ø‡§π‡§æ‡§Å ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶ ‡§Ü‡§è‡§ó‡§æ..." readonly></textarea>
            </div>
        </div>

        <div class="controls">
            <button class="btn" onclick="loadFile()" title="TXT ‡§´‡§æ‡§á‡§≤ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç">
                üìÇ Upload .txt
            </button>
            <input type="file" id="fileInput" accept=".txt" onchange="handleFile(event)">
            
            <button class="btn" id="translateBtn" onclick="translateText()" title="Ctrl+Enter">
                ‚ö° Translate
            </button>
            
            <button class="btn success" id="copyBtn" onclick="copyText()" disabled title="‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡•á‡§Ç">
                üìã Copy Hindi
            </button>
        </div>

        <div id="status" class="status"></div>
    </div>

    <script>
        const englishText = document.getElementById('englishText');
        const hindiText = document.getElementById('hindiText');
        const translateBtn = document.getElementById('translateBtn');
        const copyBtn = document.getElementById('copyBtn');
        const statusDiv = document.getElementById('status');
        const charCount = document.getElementById('charCount');
        const fileInput = document.getElementById('fileInput');

        // Character counter
        englishText.addEventListener('input', updateCharCount);
        function updateCharCount() {
            const length = englishText.value.length;
            charCount.textContent = `${length}/3000`;
            charCount.style.color = length > 2800 ? 'var(--error)' : 'var(--text-secondary)';
        }

        // File upload
        function loadFile() {
            fileInput.click();
        }

        function handleFile(event) {
            const file = event.target.files[0];
            if (!file) return;

            if (!file.name.toLowerCase().endsWith('.txt')) {
                showStatus('‚ùå ‡§ï‡•á‡§µ‡§≤ .txt ‡§´‡§æ‡§á‡§≤‡•á‡§Ç ‡§∏‡§™‡•ã‡§∞‡•ç‡§ü ‡§π‡•à‡§Ç!', 'error');
                return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                const content = e.target.result;
                if (content.length > 3000) {
                    englishText.value = content.slice(0, 3000);
                    showStatus('‚ö†Ô∏è ‡§´‡§æ‡§á‡§≤ ‡§ï‡§æ‡§ü‡•Ä ‡§ó‡§à (3000 ‡§Ö‡§ï‡•ç‡§∑‡§∞ ‡§≤‡§ø‡§Æ‡§ø‡§ü)', 'error');
                } else {
                    englishText.value = content;
                    showStatus('‚úÖ ‡§´‡§æ‡§á‡§≤ ‡§≤‡•ã‡§° ‡§π‡•ã ‡§ó‡§à!', 'success');
                }
                updateCharCount();
                fileInput.value = '';
            };
            reader.onerror = () => showStatus('‚ùå ‡§´‡§æ‡§á‡§≤ ‡§™‡§¢‡§º‡§®‡•á ‡§Æ‡•á‡§Ç ‡§è‡§∞‡§∞!', 'error');
            reader.readAsText(file);
        }

        // üî• WORKING TRANSLATION (3 APIs fallback)
        async function translateText() {
            const text = englishText.value.trim();
            if (!text) {
                showStatus('‚ùå ‡§™‡§π‡§≤‡•á English ‡§≤‡§ø‡§ñ‡•á‡§Ç!', 'error');
                return;
            }

            setLoading(true);
            copyBtn.disabled = true;
            hindiText.value = '‚è≥ ‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...';

            try {
                // API 1: MyMemory (‡§∏‡§¨‡§∏‡•á ‡§§‡•á‡§ú‡§º)
                const result1 = await fetchMyMemory(text);
                if (result1) return finishTranslation(result1);

                // API 2: LibreTranslate
                const result2 = await fetchLibreTranslate(text);
                if (result2) return finishTranslation(result2);

                // API 3: Backup API
                const result3 = await fetchBackupAPI(text);
                if (result3) return finishTranslation(result3);

                throw new Error('‡§∏‡§≠‡•Ä APIs unavailable');

            } catch (error) {
                console.error('Translation failed:', error);
                hindiText.value = '‚ùå ‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶ ‡§∏‡•á‡§µ‡§æ ‡§Ö‡§∏‡•ç‡§•‡§æ‡§Ø‡•Ä ‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß‡•§
‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç ‡§Ø‡§æ ‡§•‡•ã‡§°‡§º‡•Ä ‡§¶‡•á‡§∞ ‡§¨‡§æ‡§¶ ‡§ü‡•ç‡§∞‡§æ‡§à ‡§ï‡§∞‡•á‡§Ç‡•§';
                showStatus('üåê ‡§∏‡§≠‡•Ä APIs down ‡§π‡•à‡§Ç‡•§ VPN ‡§ü‡•ç‡§∞‡§æ‡§à ‡§ï‡§∞‡•á‡§Ç!', 'error');
            } finally {
                setLoading(false);
            }
        }

        async function fetchMyMemory(text) {
            try {
                const response = await fetch(
                    `https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=en|hi`
                );
                const data = await response.json();
                if (data.responseStatus === 200 && data.responseData?.translatedText) {
                    return data.responseData.translatedText;
                }
            } catch (e) {}
            return null;
        }

        async function fetchLibreTranslate(text) {
            try {
                const response = await fetch('https://libretranslate.de/translate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        q: text,
                        source: 'en',
                        target: 'hi',
                        format: 'text'
                    })
                });
                const data = await response.json();
                return data.translatedText;
            } catch (e) {}
            return null;
        }

        async function fetchBackupAPI(text) {
            try {
                const response = await fetch('https://translate-api-free.vercel.app/translate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ text, target: 'hi', source: 'en' })
                });
                const data = await response.json();
                return data.translatedText;
            } catch (e) {}
            return null;
        }

        function finishTranslation(translatedText) {
            hindiText.value = translatedText;
            copyBtn.disabled = false;
            showStatus(`‚úÖ ‡§∏‡§´‡§≤! ${translatedText.length} ‡§Ö‡§ï‡•ç‡§∑‡§∞`, 'success');
        }

        function setLoading(loading) {
            translateBtn.disabled = loading;
            translateBtn.innerHTML = loading ? '‚è≥ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...' : '‚ö° Translate';
            if (loading) {
                statusDiv.className = 'status loading';
                statusDiv.textContent = '‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...';
                statusDiv.style.display = 'block';
            }
        }

        function showStatus(msg, type) {
            statusDiv.textContent = msg;
            statusDiv.className = `status ${type}`;
            statusDiv.style.display = 'block';
            setTimeout(() => statusDiv.style.display = 'none', 5000);
        }

        function copyText() {
            const text = hindiText.value.trim();
            if (!text || text.startsWith('‚ùå') || text.startsWith('‚è≥')) {
                showStatus('‚ùå ‡§™‡§π‡§≤‡•á ‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶ ‡§ï‡§∞‡•á‡§Ç!', 'error');
                return;
            }

            navigator.clipboard.writeText(text).then(() => {
                const btn = copyBtn;
                const original = btn.innerHTML;
                btn.innerHTML = '‚úÖ ‡§ï‡•â‡§™‡•Ä ‡§π‡•ã ‡§ó‡§Ø‡§æ!';
                btn.classList.add('success');
                setTimeout(() => {
                    btn.innerHTML = original;
                    btn.classList.remove('success');
                }, 2000);
                showStatus('üìã ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§ï‡•ç‡§≤‡§ø‡§™‡§¨‡•ã‡§∞‡•ç‡§° ‡§Æ‡•á‡§Ç ‡§ï‡•â‡§™‡•Ä!', 'success');
            }).catch(() => {
                hindiText.select();
                document.execCommand('copy');
                showStatus('üìã ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§ï‡•â‡§™‡•Ä ‡§π‡•ã ‡§ó‡§Ø‡§æ!', 'success');
            });
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey || e.metaKey) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    translateText();
                }
            }
        });

        // Initialize
        updateCharCount();
    </script>
</body>
</html>
